{"componentChunkName":"component---src-templates-ebook-page-js","path":"/ebook/13-map/","webpackCompilationHash":"da4a2de245a6e20657db","result":{"data":{"site":{"siteMetadata":{"title":"Another C Library"}},"markdownRemark":{"id":"2fa9f726-8017-5017-a937-568efa05c69b","html":"<p>Copyright 2019 Andy Curtis &#x26; Daniel Curtis</p>\n<h1 id=\"the-map-object\"><a href=\"#the-map-object\" aria-label=\"the map object permalink\" class=\"anchor\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>The Map Object</h1>\n<ul>\n<li>Turning the red black tree into a map</li>\n</ul>\n<p><em>This and the src/ac_map.h/c files were started on Monday 9/23/19 and are still a work in progress.</em></p>\n<p>The code for this section is found in <i>illustrations/13<em>map/1</em>map</i></p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">cd</span> <span class=\"token variable\">$ac</span>/illustrations/13_map/1_map</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ <span class=\"token function\">make</span>\ngcc -O3 -I<span class=\"token punctuation\">..</span>/<span class=\"token punctuation\">..</span>/<span class=\"token punctuation\">..</span>/src -D_AC_DEBUG_MEMORY_<span class=\"token operator\">=</span>NULL <span class=\"token punctuation\">..</span>/<span class=\"token punctuation\">..</span>/<span class=\"token punctuation\">..</span>/src/ac_timer.c <span class=\"token punctuation\">..</span>/<span class=\"token punctuation\">..</span>/<span class=\"token punctuation\">..</span>/src/ac_allocator.c <span class=\"token punctuation\">..</span>/<span class=\"token punctuation\">..</span>/<span class=\"token punctuation\">..</span>/src/ac_buffer.c <span class=\"token punctuation\">..</span>/<span class=\"token punctuation\">..</span>/<span class=\"token punctuation\">..</span>/src/ac_pool.c <span class=\"token punctuation\">..</span>/<span class=\"token punctuation\">..</span>/<span class=\"token punctuation\">..</span>/src/ac_map.c test_data_structure.c -o test_data_structure\n./test_data_structure ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789 <span class=\"token number\">10000</span>\nCreating ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789 using map\nP-1\n<span class=\"token operator\">|</span>  <span class=\"token punctuation\">\\</span>\n<span class=\"token operator\">|</span>   X-2\n<span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>  <span class=\"token punctuation\">\\</span>\n<span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>   <span class=\"token punctuation\">(</span>f-2<span class=\"token punctuation\">)</span>\n<span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>    <span class=\"token punctuation\">\\</span>\n<span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>   b-3   n-3\n<span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>  <span class=\"token punctuation\">\\</span>  <span class=\"token operator\">|</span>  <span class=\"token punctuation\">\\</span>\n<span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>   <span class=\"token operator\">|</span> <span class=\"token operator\">|</span>   <span class=\"token punctuation\">(</span>r-3<span class=\"token punctuation\">)</span>\n<span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>   <span class=\"token operator\">|</span> <span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>    <span class=\"token punctuation\">\\</span>\n<span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>   <span class=\"token operator\">|</span> <span class=\"token operator\">|</span>   p-4   v-4\n<span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>   <span class=\"token operator\">|</span> <span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>  <span class=\"token punctuation\">\\</span>  <span class=\"token operator\">|</span>  <span class=\"token punctuation\">\\</span>\n<span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>   <span class=\"token operator\">|</span> <span class=\"token operator\">|</span>   o-5 <span class=\"token operator\">|</span> <span class=\"token operator\">|</span>   <span class=\"token punctuation\">(</span>x-4<span class=\"token punctuation\">)</span>\n<span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>   <span class=\"token operator\">|</span> <span class=\"token operator\">|</span>       <span class=\"token operator\">|</span> <span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>    <span class=\"token punctuation\">\\</span>\n<span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>   <span class=\"token operator\">|</span> <span class=\"token punctuation\">(</span>j-3<span class=\"token punctuation\">)</span>   <span class=\"token operator\">|</span> <span class=\"token operator\">|</span>   w-5   y-5\n<span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>   <span class=\"token operator\">|</span> <span class=\"token operator\">|</span>    <span class=\"token punctuation\">\\</span>  <span class=\"token operator\">|</span> <span class=\"token operator\">|</span>            <span class=\"token punctuation\">\\</span>\n<span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>   <span class=\"token operator\">|</span> h-4   <span class=\"token operator\">|</span> <span class=\"token operator\">|</span> <span class=\"token punctuation\">(</span>t-4<span class=\"token punctuation\">)</span>         <span class=\"token punctuation\">(</span>z-5<span class=\"token punctuation\">)</span>\n<span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>   <span class=\"token operator\">|</span> <span class=\"token operator\">|</span>  <span class=\"token punctuation\">\\</span>  <span class=\"token operator\">|</span> <span class=\"token operator\">|</span> <span class=\"token operator\">|</span>    <span class=\"token punctuation\">\\</span>             \n<span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>   <span class=\"token operator\">|</span> g-5 <span class=\"token operator\">|</span> <span class=\"token operator\">|</span> <span class=\"token operator\">|</span> s-5   u-5\n<span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>     <span class=\"token operator\">|</span> <span class=\"token operator\">|</span> <span class=\"token operator\">|</span>          \n<span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>   d-4   <span class=\"token operator\">|</span> <span class=\"token operator\">|</span> q-5\n<span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>  <span class=\"token punctuation\">\\</span>  <span class=\"token operator\">|</span> <span class=\"token operator\">|</span>    \n<span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>   c-5 <span class=\"token operator\">|</span> <span class=\"token operator\">|</span> l-4\n<span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>       <span class=\"token operator\">|</span> <span class=\"token operator\">|</span> <span class=\"token operator\">|</span>  <span class=\"token punctuation\">\\</span>\n<span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>   Z-4     <span class=\"token operator\">|</span> <span class=\"token operator\">|</span> k-5 m-5\n<span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>  <span class=\"token punctuation\">\\</span>    <span class=\"token operator\">|</span> <span class=\"token operator\">|</span>        \n<span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>   Y-5 a-5 <span class=\"token operator\">|</span> i-5\n<span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>           <span class=\"token operator\">|</span>    \n<span class=\"token operator\">|</span>   T-3         e-5\n<span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>  <span class=\"token punctuation\">\\</span>           \n<span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>   V-4\n<span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>  <span class=\"token punctuation\">\\</span>\n<span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>   U-5 W-5\n<span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>          \n<span class=\"token operator\">|</span>   R-4\n<span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>  <span class=\"token punctuation\">\\</span>\n<span class=\"token operator\">|</span>   Q-5 S-5\n<span class=\"token operator\">|</span>          \nH-2\n<span class=\"token operator\">|</span>  <span class=\"token punctuation\">\\</span>\n<span class=\"token operator\">|</span>   L-3\n<span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>  <span class=\"token punctuation\">\\</span>\n<span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>   N-4\n<span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>  <span class=\"token punctuation\">\\</span>\n<span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>   M-5 O-5\n<span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>          \n<span class=\"token operator\">|</span>   J-4\n<span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>  <span class=\"token punctuation\">\\</span>\n<span class=\"token operator\">|</span>   I-5 K-5\n<span class=\"token operator\">|</span>          \nD-3\n<span class=\"token operator\">|</span>  <span class=\"token punctuation\">\\</span>\n<span class=\"token operator\">|</span>   F-4\n<span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>  <span class=\"token punctuation\">\\</span>\n<span class=\"token operator\">|</span>   E-5 G-5\n<span class=\"token operator\">|</span>          \n<span class=\"token punctuation\">(</span><span class=\"token number\">3</span>-3<span class=\"token punctuation\">)</span>\n<span class=\"token operator\">|</span>    <span class=\"token punctuation\">\\</span>\n<span class=\"token number\">1</span>-4   <span class=\"token number\">7</span>-4\n<span class=\"token operator\">|</span>  <span class=\"token punctuation\">\\</span>  <span class=\"token operator\">|</span>  <span class=\"token punctuation\">\\</span>\n<span class=\"token number\">0</span>-5 <span class=\"token operator\">|</span> <span class=\"token operator\">|</span>   <span class=\"token punctuation\">(</span>B-4<span class=\"token punctuation\">)</span>\n    <span class=\"token operator\">|</span> <span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>    <span class=\"token punctuation\">\\</span>\n    <span class=\"token operator\">|</span> <span class=\"token operator\">|</span>   <span class=\"token number\">9</span>-5   C-5\n    <span class=\"token operator\">|</span> <span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>  <span class=\"token punctuation\">\\</span>     \n    <span class=\"token operator\">|</span> <span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>   <span class=\"token punctuation\">(</span>A-5<span class=\"token punctuation\">)</span>\n    <span class=\"token operator\">|</span> <span class=\"token operator\">|</span>   <span class=\"token operator\">|</span>        \n    <span class=\"token operator\">|</span> <span class=\"token operator\">|</span>   <span class=\"token punctuation\">(</span><span class=\"token number\">8</span>-5<span class=\"token punctuation\">)</span>\n    <span class=\"token operator\">|</span> <span class=\"token operator\">|</span>        \n    <span class=\"token operator\">|</span> <span class=\"token punctuation\">(</span><span class=\"token number\">5</span>-4<span class=\"token punctuation\">)</span>\n    <span class=\"token operator\">|</span> <span class=\"token operator\">|</span>    <span class=\"token punctuation\">\\</span>\n    <span class=\"token operator\">|</span> <span class=\"token number\">4</span>-5   <span class=\"token number\">6</span>-5\n    <span class=\"token operator\">|</span>          \n    <span class=\"token number\">2</span>-5</code></pre></div>\n<p>The third parameter to test<em>data</em>structure is 10000, which means to build the tree 10,000 times, randomly, inserting and deleting the values in the second argument.</p>\n<p>A good first step in designing any object is to understand the requirements.</p>\n<ol>\n<li>find, insert, update, remove</li>\n<li>find less than (or equal if equal exists)</li>\n<li>find greater (or equal if equal exists)</li>\n<li>iteration from nodes</li>\n<li>a copy function</li>\n<li>a print function</li>\n<li>any data type should be supported</li>\n<li>multiple data structures should be able to be embedded to the same node</li>\n<li>once a node is inserted, its memory location should not change</li>\n</ol>\n<p>The code for the interface follows</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token comment\">/*\nCopyright 2019 Andy Curtis\n\nLicensed under the Apache License, Version 2.0 (the \"License\");\nyou may not use this file except in compliance with the License.\nYou may obtain a copy of the License at\n\n    http://www.apache.org/licenses/LICENSE-2.0\n\nUnless required by applicable law or agreed to in writing, software\ndistributed under the License is distributed on an \"AS IS\" BASIS,\nWITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\nSee the License for the specific language governing permissions and\nlimitations under the License.\n*/</span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">ifndef</span> _ac_map_H</span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">define</span> _ac_map_H</span>\n\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"ac_common.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"ac_pool.h\"</span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">\"ac_buffer.h\"</span></span>\n\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;stdio.h></span></span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;stdlib.h></span></span>\n\n<span class=\"token keyword\">typedef</span> <span class=\"token keyword\">struct</span> <span class=\"token class-name\">ac_map_node_s</span> <span class=\"token punctuation\">{</span>\n  size_t parent_color<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">struct</span> <span class=\"token class-name\">ac_map_node_s</span> <span class=\"token operator\">*</span>left<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">struct</span> <span class=\"token class-name\">ac_map_node_s</span> <span class=\"token operator\">*</span>right<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> ac_map_node_t<span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/* iteration */</span>\nac_map_node_t <span class=\"token operator\">*</span> <span class=\"token function\">ac_map_first</span><span class=\"token punctuation\">(</span> ac_map_node_t <span class=\"token operator\">*</span>n <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nac_map_node_t <span class=\"token operator\">*</span> <span class=\"token function\">ac_map_last</span><span class=\"token punctuation\">(</span> ac_map_node_t <span class=\"token operator\">*</span>n <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nac_map_node_t <span class=\"token operator\">*</span> <span class=\"token function\">ac_map_next</span><span class=\"token punctuation\">(</span> ac_map_node_t <span class=\"token operator\">*</span>n <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nac_map_node_t <span class=\"token operator\">*</span> <span class=\"token function\">ac_map_previous</span><span class=\"token punctuation\">(</span> ac_map_node_t <span class=\"token operator\">*</span>n <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nac_map_node_t <span class=\"token operator\">*</span> <span class=\"token function\">ac_map_postorder_first</span><span class=\"token punctuation\">(</span> ac_map_node_t <span class=\"token operator\">*</span>n <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nac_map_node_t <span class=\"token operator\">*</span> <span class=\"token function\">ac_map_postorder_next</span><span class=\"token punctuation\">(</span> ac_map_node_t <span class=\"token operator\">*</span>n <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/*\n  ac_map_copy_node_f is a callback meant to be used with ac_map_copy to\n  copy one map to another given a root node.  The tag will typically be an\n  allocator such as the pool.\n*/</span>\n<span class=\"token keyword\">typedef</span> ac_map_node_t <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>ac_map_copy_node_f<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span> ac_map_node_t <span class=\"token operator\">*</span>n<span class=\"token punctuation\">,</span> <span class=\"token keyword\">void</span> <span class=\"token operator\">*</span>tag <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nac_map_node_t <span class=\"token operator\">*</span> <span class=\"token function\">ac_map_copy</span><span class=\"token punctuation\">(</span> ac_map_node_t <span class=\"token operator\">*</span>root<span class=\"token punctuation\">,</span> ac_map_copy_node_f copy<span class=\"token punctuation\">,</span> <span class=\"token keyword\">void</span> <span class=\"token operator\">*</span>tag<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/*\n  print_node_to_string_f is a callback meant to print the value of the node n.\n  There is an expectation that the value will be printed on a single line.\n  Printing the internal representation of the tree is largely meant for testing\n  and doesn't need to be complete.\n*/</span>\n<span class=\"token keyword\">typedef</span> <span class=\"token keyword\">char</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>print_node_to_string_f<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>ac_pool_t <span class=\"token operator\">*</span>pool<span class=\"token punctuation\">,</span> ac_map_node_t <span class=\"token operator\">*</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nbool <span class=\"token function\">ac_map_valid_to_buffer</span><span class=\"token punctuation\">(</span>ac_buffer_t <span class=\"token operator\">*</span>bh<span class=\"token punctuation\">,</span> ac_pool_t <span class=\"token operator\">*</span>pool<span class=\"token punctuation\">,</span>\n                              ac_map_node_t <span class=\"token operator\">*</span>root<span class=\"token punctuation\">,</span> print_node_to_string_f print_node <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nbool <span class=\"token function\">ac_map_valid</span><span class=\"token punctuation\">(</span>ac_pool_t <span class=\"token operator\">*</span>pool<span class=\"token punctuation\">,</span>\n                    ac_map_node_t <span class=\"token operator\">*</span>root<span class=\"token punctuation\">,</span>\n                    print_node_to_string_f print_node<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token macro property\">#<span class=\"token directive keyword\">define</span> AC_MAP_DONT_PRINT_RED 1</span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">define</span> AC_MAP_DONT_PRINT_BLACK_HEIGHT 2</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">ac_map_print_to_buffer</span><span class=\"token punctuation\">(</span>ac_buffer_t <span class=\"token operator\">*</span>bh<span class=\"token punctuation\">,</span>\n                              ac_pool_t <span class=\"token operator\">*</span>pool<span class=\"token punctuation\">,</span> ac_map_node_t <span class=\"token operator\">*</span>node<span class=\"token punctuation\">,</span>\n                              print_node_to_string_f print_node<span class=\"token punctuation\">,</span>\n                              <span class=\"token keyword\">int</span> flags <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">ac_map_print</span><span class=\"token punctuation\">(</span>ac_pool_t <span class=\"token operator\">*</span>pool<span class=\"token punctuation\">,</span> ac_map_node_t <span class=\"token operator\">*</span>node<span class=\"token punctuation\">,</span>\n                    print_node_to_string_f print_node<span class=\"token punctuation\">,</span>\n                    <span class=\"token keyword\">int</span> flags <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nbool <span class=\"token function\">ac_map_erase</span><span class=\"token punctuation\">(</span>ac_map_node_t <span class=\"token operator\">*</span>node<span class=\"token punctuation\">,</span> ac_map_node_t <span class=\"token operator\">*</span><span class=\"token operator\">*</span>root<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">ac_map_fix_insert</span><span class=\"token punctuation\">(</span>ac_map_node_t <span class=\"token operator\">*</span>node<span class=\"token punctuation\">,</span>\n                         ac_map_node_t <span class=\"token operator\">*</span>parent<span class=\"token punctuation\">,</span>\n                         ac_map_node_t <span class=\"token operator\">*</span><span class=\"token operator\">*</span>root<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/* find and insert macros */</span>\n\n<span class=\"token macro property\">#<span class=\"token directive keyword\">endif</span></span></code></pre></div>\n<p>The code in ac<em>map.c is largely not new.  The functions have been prefixed with ac</em>map<em>.  The node</em>t structure has been renamed to ac<em>map</em>node<em>t.  The internal knowledge of the value type (char key) has been eliminated from the code.  Finally, the ac</em>map<em>node</em>t structure is exposed in the header file.</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token keyword\">typedef</span> <span class=\"token keyword\">struct</span> <span class=\"token class-name\">ac_map_node_s</span> <span class=\"token punctuation\">{</span>\n  size_t parent_color<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">struct</span> <span class=\"token class-name\">ac_map_node_s</span> <span class=\"token operator\">*</span>left<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">struct</span> <span class=\"token class-name\">ac_map_node_s</span> <span class=\"token operator\">*</span>right<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> ac_map_node_t<span class=\"token punctuation\">;</span></code></pre></div>\n<p>is similar to the node_t structure before, except it doesn't have <em>char key</em>.</p>\n<p>To use the ac<em>map, this structure will be added to the custom structure.  test</em>data<em>structure.c defines the node</em>t structure as it was defined before (with a char key).  Most of the time, you will be able to make the <em>ac<em>map</em>node_t map</em> be the first member of your structure.  This makes it easy to cast between your structure and the ac<em>map</em>node_t structure since they both have the same memory address.  Having the map not be the first member will be explored later (including having multiple map members in a single structure).</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token keyword\">typedef</span> <span class=\"token keyword\">struct</span> <span class=\"token punctuation\">{</span>\n  ac_map_node_t map<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">char</span> key<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> node_t<span class=\"token punctuation\">;</span></code></pre></div>\n<p>The iteration methods still exist (first, last, next, previous).  They have just been renamed.</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\">ac_map_node_t <span class=\"token operator\">*</span> <span class=\"token function\">ac_map_first</span><span class=\"token punctuation\">(</span> ac_map_node_t <span class=\"token operator\">*</span>n <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nac_map_node_t <span class=\"token operator\">*</span> <span class=\"token function\">ac_map_last</span><span class=\"token punctuation\">(</span> ac_map_node_t <span class=\"token operator\">*</span>n <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nac_map_node_t <span class=\"token operator\">*</span> <span class=\"token function\">ac_map_next</span><span class=\"token punctuation\">(</span> ac_map_node_t <span class=\"token operator\">*</span>n <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nac_map_node_t <span class=\"token operator\">*</span> <span class=\"token function\">ac_map_previous</span><span class=\"token punctuation\">(</span> ac_map_node_t <span class=\"token operator\">*</span>n <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>If your structure is called node_t, you can call these functions as</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token keyword\">void</span> <span class=\"token function\">print_using_iteration</span><span class=\"token punctuation\">(</span>ac_map_node_t <span class=\"token operator\">*</span>root<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  node_t <span class=\"token operator\">*</span>n <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>node_t <span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token function\">ac_map_first</span><span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span> <span class=\"token string\">\"%c\"</span><span class=\"token punctuation\">,</span> n<span class=\"token operator\">-></span>key <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    n <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>node_t <span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token function\">ac_map_next</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>node_t <span class=\"token operator\">*</span><span class=\"token punctuation\">)</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span> <span class=\"token string\">\"\\n\"</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>or</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token keyword\">void</span> <span class=\"token function\">print_using_iteration</span><span class=\"token punctuation\">(</span>ac_map_node_t <span class=\"token operator\">*</span>root<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  ac_map_node_t <span class=\"token operator\">*</span>n <span class=\"token operator\">=</span> <span class=\"token function\">ac_map_first</span><span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span> <span class=\"token string\">\"%c\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>node_t <span class=\"token operator\">*</span><span class=\"token punctuation\">)</span>n<span class=\"token punctuation\">)</span><span class=\"token operator\">-></span>key <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    n <span class=\"token operator\">=</span> <span class=\"token function\">ac_map_next</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">printf</span><span class=\"token punctuation\">(</span> <span class=\"token string\">\"\\n\"</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Both approaches are equivalent, assuming that the map is the first member of the node_t structure.</p>\n<p>The node<em>first</em>to<em>erase and node</em>next<em>to</em>erase have been renamed.</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\">ac_map_node_t <span class=\"token operator\">*</span> <span class=\"token function\">ac_map_postorder_first</span><span class=\"token punctuation\">(</span> ac_map_node_t <span class=\"token operator\">*</span>n <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nac_map_node_t <span class=\"token operator\">*</span> <span class=\"token function\">ac_map_postorder_next</span><span class=\"token punctuation\">(</span> ac_map_node_t <span class=\"token operator\">*</span>n <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ac<em>map</em>copy<em>node</em>f is a callback meant to be used with ac<em>map</em>copy to copy one map to another given a root node.  The tag will typically be an allocator, such as the pool.  ac<em>map</em>copy will make a complete copy of a map (or red-black tree) and return a pointer to it.  I like to suffix function typedefs with a <em>_f</em>.</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token keyword\">typedef</span> ac_map_node_t <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>ac_map_copy_node_f<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span> ac_map_node_t <span class=\"token operator\">*</span>n<span class=\"token punctuation\">,</span> <span class=\"token keyword\">void</span> <span class=\"token operator\">*</span>tag <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nac_map_node_t <span class=\"token operator\">*</span> <span class=\"token function\">ac_map_copy</span><span class=\"token punctuation\">(</span> ac_map_node_t <span class=\"token operator\">*</span>root<span class=\"token punctuation\">,</span> ac_map_copy_node_f copy<span class=\"token punctuation\">,</span> <span class=\"token keyword\">void</span> <span class=\"token operator\">*</span>tag<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ac<em>map</em>copy could be used in the following way...</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\">ac_map_node_t <span class=\"token operator\">*</span> <span class=\"token function\">copy_node</span><span class=\"token punctuation\">(</span> ac_map_node_t <span class=\"token operator\">*</span>n<span class=\"token punctuation\">,</span> <span class=\"token keyword\">void</span> <span class=\"token operator\">*</span>tag <span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  ac_pool_t <span class=\"token operator\">*</span>pool <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>ac_pool_t <span class=\"token operator\">*</span><span class=\"token punctuation\">)</span>tag<span class=\"token punctuation\">;</span>\n  node_t <span class=\"token operator\">*</span>res <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>node_t <span class=\"token operator\">*</span><span class=\"token punctuation\">)</span><span class=\"token function\">ac_pool_alloc</span><span class=\"token punctuation\">(</span>pool<span class=\"token punctuation\">,</span> <span class=\"token keyword\">sizeof</span><span class=\"token punctuation\">(</span>node_t<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  res<span class=\"token operator\">-></span>key <span class=\"token operator\">=</span> n<span class=\"token operator\">-></span>key<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> res<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\nac_map_node_t <span class=\"token operator\">*</span>root <span class=\"token operator\">=</span> <span class=\"token comment\">/* a valid map with zero or more entries */</span><span class=\"token punctuation\">;</span>\nac_map_node_t <span class=\"token operator\">*</span>copy_of_root <span class=\"token operator\">=</span> <span class=\"token function\">ac_map_copy</span><span class=\"token punctuation\">(</span>root<span class=\"token punctuation\">,</span> copy_node<span class=\"token punctuation\">,</span> pool<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>print<em>node</em>to<em>string</em>f is a callback meant to print the value of the node n.  There is an expectation that the value will be printed on a single line.  Printing the internal representation of the tree is used for testing and printing the tree and doesn't need to be complete.  It generally doesn't have practical use within applications.</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token keyword\">typedef</span> <span class=\"token keyword\">char</span> <span class=\"token operator\">*</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>print_node_to_string_f<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>ac_pool_t <span class=\"token operator\">*</span>pool<span class=\"token punctuation\">,</span> ac_map_node_t <span class=\"token operator\">*</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>For debugging, it is often nice to be able just to print something to the terminal.  Sometimes, it is also nice to print to a buffer and then have the output directed to some other location.  I provide both mechanisms below.  The first prints errors in the map (red-black violations) to a buffer and returns false if there are any errors.  The second function is like the first, except it outputs directly to the screen.  Both of these functions require the root of the tree and a pointer to a print<em>node</em>to<em>string</em>f function.</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\">bool <span class=\"token function\">ac_map_valid_to_buffer</span><span class=\"token punctuation\">(</span>ac_buffer_t <span class=\"token operator\">*</span>bh<span class=\"token punctuation\">,</span> ac_pool_t <span class=\"token operator\">*</span>pool<span class=\"token punctuation\">,</span>\n                              ac_map_node_t <span class=\"token operator\">*</span>root<span class=\"token punctuation\">,</span> print_node_to_string_f print_node <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nbool <span class=\"token function\">ac_map_valid</span><span class=\"token punctuation\">(</span>ac_pool_t <span class=\"token operator\">*</span>pool<span class=\"token punctuation\">,</span>\n                    ac_map_node_t <span class=\"token operator\">*</span>root<span class=\"token punctuation\">,</span>\n                    print_node_to_string_f print_node<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ac<em>map</em>valid checks if the map is valid.  ac<em>map</em>print dumps the contents of a map in a tree-like manner.  It takes additional parameter flags, which would typically be zero unless you with to not print red nodes in the color red and/or you don't want the black height of a node suffixed in the print.  The flags are bit-oriented and can be or'ed together.</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token macro property\">#<span class=\"token directive keyword\">define</span> AC_MAP_DONT_PRINT_RED 1</span>\n<span class=\"token macro property\">#<span class=\"token directive keyword\">define</span> AC_MAP_DONT_PRINT_BLACK_HEIGHT 2</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">ac_map_print_to_buffer</span><span class=\"token punctuation\">(</span>ac_buffer_t <span class=\"token operator\">*</span>bh<span class=\"token punctuation\">,</span>\n                              ac_pool_t <span class=\"token operator\">*</span>pool<span class=\"token punctuation\">,</span> ac_map_node_t <span class=\"token operator\">*</span>node<span class=\"token punctuation\">,</span>\n                              print_node_to_string_f print_node<span class=\"token punctuation\">,</span>\n                              <span class=\"token keyword\">int</span> flags <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">ac_map_print</span><span class=\"token punctuation\">(</span>ac_pool_t <span class=\"token operator\">*</span>pool<span class=\"token punctuation\">,</span> ac_map_node_t <span class=\"token operator\">*</span>node<span class=\"token punctuation\">,</span>\n                    print_node_to_string_f print_node<span class=\"token punctuation\">,</span>\n                    <span class=\"token keyword\">int</span> flags <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ac<em>map</em>erase unlinks node from the given map.  The node is expected to be a valid node within the tree (typically found via a find method).  ac<em>map</em>erase does not destroy the node (it simply unlinks it from the map).</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\">bool <span class=\"token function\">ac_map_erase</span><span class=\"token punctuation\">(</span>ac_map_node_t <span class=\"token operator\">*</span>node<span class=\"token punctuation\">,</span> ac_map_node_t <span class=\"token operator\">*</span><span class=\"token operator\">*</span>root<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>The find and insert methods were left to the end for a reason.  These are the only two groups of functions that need to understand the value of a node.  These functions end up being custom.  To aid in writing these functions, I've created the following macros.</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token function\">ac_map_find_m</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> keytype<span class=\"token punctuation\">,</span> datatype<span class=\"token punctuation\">,</span> compare<span class=\"token punctuation\">)</span>\n  expects<span class=\"token operator\">:</span> <span class=\"token keyword\">int</span> <span class=\"token function\">compare</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> keytype <span class=\"token operator\">*</span>key<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> datatype <span class=\"token operator\">*</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  returns<span class=\"token operator\">:</span> datatype <span class=\"token operator\">*</span><span class=\"token function\">name</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> keytype <span class=\"token operator\">*</span>key<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> ac_map_node_t <span class=\"token operator\">*</span>root<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">ac_map_find2_m</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> keytype<span class=\"token punctuation\">,</span> datatype<span class=\"token punctuation\">,</span> mapname<span class=\"token punctuation\">,</span> compare<span class=\"token punctuation\">)</span>\n  expects<span class=\"token operator\">:</span> <span class=\"token keyword\">int</span> <span class=\"token function\">compare</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> keytype <span class=\"token operator\">*</span>key<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> datatype <span class=\"token operator\">*</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  returns<span class=\"token operator\">:</span> datatype <span class=\"token operator\">*</span><span class=\"token function\">name</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> keytype <span class=\"token operator\">*</span>key<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> ac_map_node_t <span class=\"token operator\">*</span>root<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">ac_map_find_arg_m</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> keytype<span class=\"token punctuation\">,</span> datatype<span class=\"token punctuation\">,</span> compare<span class=\"token punctuation\">)</span>\n  expects<span class=\"token operator\">:</span> <span class=\"token keyword\">int</span> <span class=\"token function\">compare</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> keytype <span class=\"token operator\">*</span>key<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> datatype <span class=\"token operator\">*</span>value<span class=\"token punctuation\">,</span> <span class=\"token keyword\">void</span> <span class=\"token operator\">*</span>arg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  returns<span class=\"token operator\">:</span> datatype <span class=\"token operator\">*</span><span class=\"token function\">name</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> keytype <span class=\"token operator\">*</span>key<span class=\"token punctuation\">,</span>\n                          <span class=\"token keyword\">const</span> ac_map_node_t <span class=\"token operator\">*</span>root<span class=\"token punctuation\">,</span>\n                          <span class=\"token keyword\">void</span> <span class=\"token operator\">*</span>arg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">ac_map_find2_arg_m</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> keytype<span class=\"token punctuation\">,</span> datatype<span class=\"token punctuation\">,</span> mapname<span class=\"token punctuation\">,</span> compare<span class=\"token punctuation\">)</span>\n  expects<span class=\"token operator\">:</span> <span class=\"token keyword\">int</span> <span class=\"token function\">compare</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> keytype <span class=\"token operator\">*</span>key<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> datatype <span class=\"token operator\">*</span>value<span class=\"token punctuation\">,</span> <span class=\"token keyword\">void</span> <span class=\"token operator\">*</span>arg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  returns<span class=\"token operator\">:</span> datatype <span class=\"token operator\">*</span><span class=\"token function\">name</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> keytype <span class=\"token operator\">*</span>key<span class=\"token punctuation\">,</span>\n                          <span class=\"token keyword\">const</span> ac_map_node_t <span class=\"token operator\">*</span>root<span class=\"token punctuation\">,</span>\n                          <span class=\"token keyword\">void</span> <span class=\"token operator\">*</span>arg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">ac_map_find_least_m</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> keytype<span class=\"token punctuation\">,</span> datatype<span class=\"token punctuation\">,</span> compare<span class=\"token punctuation\">)</span>\n  expects<span class=\"token operator\">:</span> <span class=\"token keyword\">int</span> <span class=\"token function\">compare</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> keytype <span class=\"token operator\">*</span>key<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> datatype <span class=\"token operator\">*</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  returns<span class=\"token operator\">:</span> datatype <span class=\"token operator\">*</span><span class=\"token function\">name</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> keytype <span class=\"token operator\">*</span>key<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> ac_map_node_t <span class=\"token operator\">*</span>root<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">ac_map_find_least2_m</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> keytype<span class=\"token punctuation\">,</span> datatype<span class=\"token punctuation\">,</span> mapname<span class=\"token punctuation\">,</span> compare<span class=\"token punctuation\">)</span>\n  expects<span class=\"token operator\">:</span> <span class=\"token keyword\">int</span> <span class=\"token function\">compare</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> keytype <span class=\"token operator\">*</span>key<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> datatype <span class=\"token operator\">*</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  returns<span class=\"token operator\">:</span> datatype <span class=\"token operator\">*</span><span class=\"token function\">name</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> keytype <span class=\"token operator\">*</span>key<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> ac_map_node_t <span class=\"token operator\">*</span>root<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">ac_map_find_least_arg_m</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> keytype<span class=\"token punctuation\">,</span> datatype<span class=\"token punctuation\">,</span> compare<span class=\"token punctuation\">)</span>\n  expects<span class=\"token operator\">:</span> <span class=\"token keyword\">int</span> <span class=\"token function\">compare</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> keytype <span class=\"token operator\">*</span>key<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> datatype <span class=\"token operator\">*</span>value<span class=\"token punctuation\">,</span> <span class=\"token keyword\">void</span> <span class=\"token operator\">*</span>arg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  returns<span class=\"token operator\">:</span> datatype <span class=\"token operator\">*</span><span class=\"token function\">name</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> keytype <span class=\"token operator\">*</span>key<span class=\"token punctuation\">,</span>\n                          <span class=\"token keyword\">const</span> ac_map_node_t <span class=\"token operator\">*</span>root<span class=\"token punctuation\">,</span>\n                          <span class=\"token keyword\">void</span> <span class=\"token operator\">*</span>arg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">ac_map_find_least2_arg_m</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> keytype<span class=\"token punctuation\">,</span> datatype<span class=\"token punctuation\">,</span> mapname<span class=\"token punctuation\">,</span> compare<span class=\"token punctuation\">)</span>\n  expects<span class=\"token operator\">:</span> <span class=\"token keyword\">int</span> <span class=\"token function\">compare</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> keytype <span class=\"token operator\">*</span>key<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> datatype <span class=\"token operator\">*</span>value<span class=\"token punctuation\">,</span> <span class=\"token keyword\">void</span> <span class=\"token operator\">*</span>arg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  returns<span class=\"token operator\">:</span> datatype <span class=\"token operator\">*</span><span class=\"token function\">name</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> keytype <span class=\"token operator\">*</span>key<span class=\"token punctuation\">,</span>\n                          <span class=\"token keyword\">const</span> ac_map_node_t <span class=\"token operator\">*</span>root<span class=\"token punctuation\">,</span>\n                          <span class=\"token keyword\">void</span> <span class=\"token operator\">*</span>arg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">ac_map_find_least_or_next_m</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> keytype<span class=\"token punctuation\">,</span> datatype<span class=\"token punctuation\">,</span> compare<span class=\"token punctuation\">)</span>\n  expects<span class=\"token operator\">:</span> <span class=\"token keyword\">int</span> <span class=\"token function\">compare</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> keytype <span class=\"token operator\">*</span>key<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> datatype <span class=\"token operator\">*</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  returns<span class=\"token operator\">:</span> datatype <span class=\"token operator\">*</span><span class=\"token function\">name</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> keytype <span class=\"token operator\">*</span>key<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> ac_map_node_t <span class=\"token operator\">*</span>root<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">ac_map_find_least_or_next2_m</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> keytype<span class=\"token punctuation\">,</span> datatype<span class=\"token punctuation\">,</span> mapname<span class=\"token punctuation\">,</span> compare<span class=\"token punctuation\">)</span>\n  expects<span class=\"token operator\">:</span> <span class=\"token keyword\">int</span> <span class=\"token function\">compare</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> keytype <span class=\"token operator\">*</span>key<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> datatype <span class=\"token operator\">*</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  returns<span class=\"token operator\">:</span> datatype <span class=\"token operator\">*</span><span class=\"token function\">name</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> keytype <span class=\"token operator\">*</span>key<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> ac_map_node_t <span class=\"token operator\">*</span>root<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">ac_map_find_least_or_next_arg_m</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> keytype<span class=\"token punctuation\">,</span> datatype<span class=\"token punctuation\">,</span> compare<span class=\"token punctuation\">)</span>\n  expects<span class=\"token operator\">:</span> <span class=\"token keyword\">int</span> <span class=\"token function\">compare</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> keytype <span class=\"token operator\">*</span>key<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> datatype <span class=\"token operator\">*</span>value<span class=\"token punctuation\">,</span> <span class=\"token keyword\">void</span> <span class=\"token operator\">*</span>arg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  returns<span class=\"token operator\">:</span> datatype <span class=\"token operator\">*</span><span class=\"token function\">name</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> keytype <span class=\"token operator\">*</span>key<span class=\"token punctuation\">,</span>\n                          <span class=\"token keyword\">const</span> ac_map_node_t <span class=\"token operator\">*</span>root<span class=\"token punctuation\">,</span>\n                          <span class=\"token keyword\">void</span> <span class=\"token operator\">*</span>arg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">ac_map_find_least_or_next2_arg_m</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> keytype<span class=\"token punctuation\">,</span> datatype<span class=\"token punctuation\">,</span> mapname<span class=\"token punctuation\">,</span> compare<span class=\"token punctuation\">)</span>\n  expects<span class=\"token operator\">:</span> <span class=\"token keyword\">int</span> <span class=\"token function\">compare</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> keytype <span class=\"token operator\">*</span>key<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> datatype <span class=\"token operator\">*</span>value<span class=\"token punctuation\">,</span> <span class=\"token keyword\">void</span> <span class=\"token operator\">*</span>arg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  returns<span class=\"token operator\">:</span> datatype <span class=\"token operator\">*</span><span class=\"token function\">name</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> keytype <span class=\"token operator\">*</span>key<span class=\"token punctuation\">,</span>\n                          <span class=\"token keyword\">const</span> ac_map_node_t <span class=\"token operator\">*</span>root<span class=\"token punctuation\">,</span>\n                          <span class=\"token keyword\">void</span> <span class=\"token operator\">*</span>arg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">ac_map_find_greatest_m</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> keytype<span class=\"token punctuation\">,</span> datatype<span class=\"token punctuation\">,</span> compare<span class=\"token punctuation\">)</span>\n  expects<span class=\"token operator\">:</span> <span class=\"token keyword\">int</span> <span class=\"token function\">compare</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> keytype <span class=\"token operator\">*</span>key<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> datatype <span class=\"token operator\">*</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  returns<span class=\"token operator\">:</span> datatype <span class=\"token operator\">*</span><span class=\"token function\">name</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> keytype <span class=\"token operator\">*</span>key<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> ac_map_node_t <span class=\"token operator\">*</span>root<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">ac_map_find_greatest2_m</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> keytype<span class=\"token punctuation\">,</span> datatype<span class=\"token punctuation\">,</span> mapname<span class=\"token punctuation\">,</span> compare<span class=\"token punctuation\">)</span>\n  expects<span class=\"token operator\">:</span> <span class=\"token keyword\">int</span> <span class=\"token function\">compare</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> keytype <span class=\"token operator\">*</span>key<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> datatype <span class=\"token operator\">*</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  returns<span class=\"token operator\">:</span> datatype <span class=\"token operator\">*</span><span class=\"token function\">name</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> keytype <span class=\"token operator\">*</span>key<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> ac_map_node_t <span class=\"token operator\">*</span>root<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">ac_map_find_greatest_arg_m</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> keytype<span class=\"token punctuation\">,</span> datatype<span class=\"token punctuation\">,</span> compare<span class=\"token punctuation\">)</span>\n  expects<span class=\"token operator\">:</span> <span class=\"token keyword\">int</span> <span class=\"token function\">compare</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> keytype <span class=\"token operator\">*</span>key<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> datatype <span class=\"token operator\">*</span>value<span class=\"token punctuation\">,</span> <span class=\"token keyword\">void</span> <span class=\"token operator\">*</span>arg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  returns<span class=\"token operator\">:</span> datatype <span class=\"token operator\">*</span><span class=\"token function\">name</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> keytype <span class=\"token operator\">*</span>key<span class=\"token punctuation\">,</span>\n                          <span class=\"token keyword\">const</span> ac_map_node_t <span class=\"token operator\">*</span>root<span class=\"token punctuation\">,</span>\n                          <span class=\"token keyword\">void</span> <span class=\"token operator\">*</span>arg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">ac_map_find_greatest2_arg_m</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> keytype<span class=\"token punctuation\">,</span> datatype<span class=\"token punctuation\">,</span> mapname<span class=\"token punctuation\">,</span> compare<span class=\"token punctuation\">)</span>\n  expects<span class=\"token operator\">:</span> <span class=\"token keyword\">int</span> <span class=\"token function\">compare</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> keytype <span class=\"token operator\">*</span>key<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> datatype <span class=\"token operator\">*</span>value<span class=\"token punctuation\">,</span> <span class=\"token keyword\">void</span> <span class=\"token operator\">*</span>arg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  returns<span class=\"token operator\">:</span> datatype <span class=\"token operator\">*</span><span class=\"token function\">name</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> keytype <span class=\"token operator\">*</span>key<span class=\"token punctuation\">,</span>\n                          <span class=\"token keyword\">const</span> ac_map_node_t <span class=\"token operator\">*</span>root<span class=\"token punctuation\">,</span>\n                          <span class=\"token keyword\">void</span> <span class=\"token operator\">*</span>arg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nThe insert macros are listed below <span class=\"token punctuation\">(</span>they are defined in impl<span class=\"token operator\">/</span>ac_map<span class=\"token punctuation\">.</span>h<span class=\"token punctuation\">)</span>\n\n<span class=\"token function\">ac_map_insert_m</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> datatype<span class=\"token punctuation\">,</span> compare<span class=\"token punctuation\">)</span>\n  expects<span class=\"token operator\">:</span> <span class=\"token keyword\">int</span> <span class=\"token function\">compare</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> datatype <span class=\"token operator\">*</span>node_to_insert<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> datatype <span class=\"token operator\">*</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  returns<span class=\"token operator\">:</span> datatype <span class=\"token operator\">*</span><span class=\"token function\">name</span><span class=\"token punctuation\">(</span>datatype <span class=\"token operator\">*</span>node_to_insert<span class=\"token punctuation\">,</span> ac_map_node_t <span class=\"token operator\">*</span><span class=\"token operator\">*</span>root<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">ac_map_insert2_m</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> datatype<span class=\"token punctuation\">,</span> mapname<span class=\"token punctuation\">,</span> compare<span class=\"token punctuation\">)</span>\n  expects<span class=\"token operator\">:</span> <span class=\"token keyword\">int</span> <span class=\"token function\">compare</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> datatype <span class=\"token operator\">*</span>node_to_insert<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> datatype <span class=\"token operator\">*</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  returns<span class=\"token operator\">:</span> datatype <span class=\"token operator\">*</span><span class=\"token function\">name</span><span class=\"token punctuation\">(</span>datatype <span class=\"token operator\">*</span>node_to_insert<span class=\"token punctuation\">,</span> ac_map_node_t <span class=\"token operator\">*</span><span class=\"token operator\">*</span>root<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">ac_map_insert_arg_m</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> datatype<span class=\"token punctuation\">,</span> compare<span class=\"token punctuation\">)</span>\n  expects<span class=\"token operator\">:</span> <span class=\"token keyword\">int</span> <span class=\"token function\">compare</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> datatype <span class=\"token operator\">*</span>node_to_insert<span class=\"token punctuation\">,</span>\n                       <span class=\"token keyword\">const</span> datatype <span class=\"token operator\">*</span>value<span class=\"token punctuation\">,</span>\n                       <span class=\"token keyword\">void</span> <span class=\"token operator\">*</span>arg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  returns<span class=\"token operator\">:</span> datatype <span class=\"token operator\">*</span><span class=\"token function\">name</span><span class=\"token punctuation\">(</span>datatype <span class=\"token operator\">*</span>node_to_insert<span class=\"token punctuation\">,</span>\n                          ac_map_node_t <span class=\"token operator\">*</span><span class=\"token operator\">*</span>root<span class=\"token punctuation\">,</span>\n                          <span class=\"token keyword\">void</span> <span class=\"token operator\">*</span>arg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">ac_map_insert2_arg_m</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> datatype<span class=\"token punctuation\">,</span> mapname<span class=\"token punctuation\">,</span> compare<span class=\"token punctuation\">)</span>\n  expects<span class=\"token operator\">:</span> <span class=\"token keyword\">int</span> <span class=\"token function\">compare</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> datatype <span class=\"token operator\">*</span>node_to_insert<span class=\"token punctuation\">,</span>\n                       <span class=\"token keyword\">const</span> datatype <span class=\"token operator\">*</span>value<span class=\"token punctuation\">,</span>\n                       <span class=\"token keyword\">void</span> <span class=\"token operator\">*</span>arg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  returns<span class=\"token operator\">:</span> datatype <span class=\"token operator\">*</span><span class=\"token function\">name</span><span class=\"token punctuation\">(</span>datatype <span class=\"token operator\">*</span>node_to_insert<span class=\"token punctuation\">,</span>\n                          ac_map_node_t <span class=\"token operator\">*</span><span class=\"token operator\">*</span>root<span class=\"token punctuation\">,</span>\n                          <span class=\"token keyword\">void</span> <span class=\"token operator\">*</span>arg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">ac_multimap_insert_m</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> datatype<span class=\"token punctuation\">,</span> compare<span class=\"token punctuation\">)</span>\n  expects<span class=\"token operator\">:</span> <span class=\"token keyword\">int</span> <span class=\"token function\">compare</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> datatype <span class=\"token operator\">*</span>node_to_insert<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> datatype <span class=\"token operator\">*</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  returns<span class=\"token operator\">:</span> datatype <span class=\"token operator\">*</span><span class=\"token function\">name</span><span class=\"token punctuation\">(</span>datatype <span class=\"token operator\">*</span>node_to_insert<span class=\"token punctuation\">,</span> ac_map_node_t <span class=\"token operator\">*</span><span class=\"token operator\">*</span>root<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">ac_multimap_insert2_m</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> datatype<span class=\"token punctuation\">,</span> mapname<span class=\"token punctuation\">,</span> compare<span class=\"token punctuation\">)</span>\n  expects<span class=\"token operator\">:</span> <span class=\"token keyword\">int</span> <span class=\"token function\">compare</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> datatype <span class=\"token operator\">*</span>node_to_insert<span class=\"token punctuation\">,</span> <span class=\"token keyword\">const</span> datatype <span class=\"token operator\">*</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  returns<span class=\"token operator\">:</span> datatype <span class=\"token operator\">*</span><span class=\"token function\">name</span><span class=\"token punctuation\">(</span>datatype <span class=\"token operator\">*</span>node_to_insert<span class=\"token punctuation\">,</span> ac_map_node_t <span class=\"token operator\">*</span><span class=\"token operator\">*</span>root<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">ac_multimap_insert_arg_m</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> datatype<span class=\"token punctuation\">,</span> compare<span class=\"token punctuation\">)</span>\n  expects<span class=\"token operator\">:</span> <span class=\"token keyword\">int</span> <span class=\"token function\">compare</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> datatype <span class=\"token operator\">*</span>node_to_insert<span class=\"token punctuation\">,</span>\n                       <span class=\"token keyword\">const</span> datatype <span class=\"token operator\">*</span>value<span class=\"token punctuation\">,</span>\n                       <span class=\"token keyword\">void</span> <span class=\"token operator\">*</span>arg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  returns<span class=\"token operator\">:</span> datatype <span class=\"token operator\">*</span><span class=\"token function\">name</span><span class=\"token punctuation\">(</span>datatype <span class=\"token operator\">*</span>node_to_insert<span class=\"token punctuation\">,</span>\n                          ac_map_node_t <span class=\"token operator\">*</span><span class=\"token operator\">*</span>root<span class=\"token punctuation\">,</span>\n                          <span class=\"token keyword\">void</span> <span class=\"token operator\">*</span>arg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token function\">ac_multimap_insert2_arg_m</span><span class=\"token punctuation\">(</span>name<span class=\"token punctuation\">,</span> datatype<span class=\"token punctuation\">,</span> mapname<span class=\"token punctuation\">,</span> compare<span class=\"token punctuation\">)</span>\n  expects<span class=\"token operator\">:</span> <span class=\"token keyword\">int</span> <span class=\"token function\">compare</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> datatype <span class=\"token operator\">*</span>node_to_insert<span class=\"token punctuation\">,</span>\n                       <span class=\"token keyword\">const</span> datatype <span class=\"token operator\">*</span>value<span class=\"token punctuation\">,</span>\n                       <span class=\"token keyword\">void</span> <span class=\"token operator\">*</span>arg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  returns<span class=\"token operator\">:</span> datatype <span class=\"token operator\">*</span><span class=\"token function\">name</span><span class=\"token punctuation\">(</span>datatype <span class=\"token operator\">*</span>node_to_insert<span class=\"token punctuation\">,</span>\n                          ac_map_node_t <span class=\"token operator\">*</span><span class=\"token operator\">*</span>root<span class=\"token punctuation\">,</span>\n                          <span class=\"token keyword\">void</span> <span class=\"token operator\">*</span>arg<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>","frontmatter":{"title":"13. The Map Object"}},"allMarkdownRemark":{"edges":[{"node":{"id":"0a141fc9-d544-5594-aa1a-265de78c5272","frontmatter":{"title":"","path":null},"headings":[{"value":"Things that have been helpful to me"}]}},{"node":{"id":"dea5051e-2149-5815-9ce0-27cb393ad3d2","frontmatter":{"title":"","path":null},"headings":[{"value":"Improving Quicksort"},{"value":"The Improvement to Quicksort"}]}},{"node":{"id":"5eb893ad-02cc-5749-b609-78f60bee9281","frontmatter":{"title":"1. Getting Started","path":"/1-getting-started"},"headings":[{"value":"A quick word about licensing"},{"value":"Getting Started"},{"value":"Timing Your Code (the first project)"}]}},{"node":{"id":"7084dd2c-2755-5268-918d-c3af4aea7e6d","frontmatter":{"title":"10. Binary Search Trees","path":"/10-binary-search-trees"},"headings":[{"value":"Binary Search Trees"},{"value":"Find"},{"value":"Insert"},{"value":"Balancing Binary Search Trees"}]}},{"node":{"id":"dceada54-0055-5815-9e8c-c4690446e7b3","frontmatter":{"title":"11. Balancing Binary Search Trees","path":"/11-balancing-binary-search-trees"},"headings":[{"value":"Balancing Binary Search Trees"},{"value":"The Red Black Tree"}]}},{"node":{"id":"4b274f94-d5cf-5356-9366-de54119f24ae","frontmatter":{"title":"12. The Red-Black Tree","path":"/12-red-black-tree"},"headings":[{"value":"The Red-Black Tree"}]}},{"node":{"id":"2fa9f726-8017-5017-a937-568efa05c69b","frontmatter":{"title":"13. The Map Object","path":"/13-map"},"headings":[{"value":"The Map Object"}]}},{"node":{"id":"89d27820-7837-5316-9a1c-8bd3e7485e3f","frontmatter":{"title":"14. The Set and Multimap","path":"/14-set-and-multimap"},"headings":[{"value":"The set and multimap"}]}},{"node":{"id":"d4776902-9b84-51f5-98db-836c22386aa5","frontmatter":{"title":"2. Timing Your Code","path":"/2-timing"},"headings":[{"value":"Timing Your Code (the first project)"},{"value":"Splitting up code into multiple files"},{"value":"include <stdlib.h> is added at the top of the file since it is needed for malloc.  All of the members are initialized to zero except repeat (which is set to the value passed into timer_init)."},{"value":"The Buffer Object"}]}},{"node":{"id":"334411a5-0313-5831-9193-0737c8e4122b","frontmatter":{"title":"3. The Buffer Object","path":"/3-buffer"},"headings":[{"value":"The Buffer Object"},{"value":"Linked Lists"}]}},{"node":{"id":"bafe1fd6-714d-58ac-8ab0-2f455f518e19","frontmatter":{"title":"4. Linked Lists","path":"/4-linked-lists"},"headings":[{"value":"Linked Lists"},{"value":"Threads"}]}},{"node":{"id":"1fbe840f-47a7-51f9-a94b-431a4b44f35c","frontmatter":{"title":"5. Introducing Threads","path":"/5-threads"},"headings":[{"value":"Macros"}]}},{"node":{"id":"09515fb4-be52-520c-b963-ef137ff19fc7","frontmatter":{"title":"6. Macros","path":"/6-macros"},"headings":[{"value":"Macros"},{"value":"The Global Allocator Object"}]}},{"node":{"id":"4a0dc1d8-476c-5792-a22b-44ab620ff631","frontmatter":{"title":"7. The Global Allocator Object","path":"/7-allocator"},"headings":[{"value":"The Global Allocator Object"},{"value":"A Quick Recap"},{"value":"Continue to build out the allocator implementation!"}]}},{"node":{"id":"b6765db4-1bbd-507d-bdf9-b245802b8d27","frontmatter":{"title":"8. The Global Allocator Implementation","path":"/8-allocator-implementation"},"headings":[{"value":"The Global Allocator Implementation"},{"value":"To Be Continued"},{"value":"The Pool Object"}]}},{"node":{"id":"793706d2-d368-5c56-90cb-12da63c2b7b1","frontmatter":{"title":"9. The Pool Object","path":"/9-pool"},"headings":[{"value":"The Pool Object"},{"value":"The Simplest Implementation"},{"value":"A better implementation"},{"value":"TO BE CONTINUED"},{"value":"Binary Search Trees"}]}}]}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/ebook/13-map/"}}}